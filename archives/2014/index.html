<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>归档：2014 | Toothpick&#39;s blog</title>
  <meta name="author" content="toothpickv">
  
  <meta name="description" content="言有物，行有恒">
  
  
  
  <meta property="og:site_name" content="Toothpick&#39;s blog"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="/atom.xml" title="Toothpick&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">Toothpick&#39;s blog</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">首页</a><li>
    
      <li class="cell"><a class="next" href="/archives/">归档</a><li>
    
      <li class="cell"><a class="next" href="/about/">关于</a><li>
    
      <li class="cell"><a class="next" href="/atom.xml">订阅</a><li>
    
    </ul>
</nav>

  <div class="widget search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="text" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:toothpick2012.github.io/">
  </form>
</div>

  <div class="widget weibo">
<iframe width="100%" height="100" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=100&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=1&isWeibo=0&isFans=0&uid=2049029440&verifier=b3a5339e&dpc=1"></iframe>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/CSS/">CSS</a><small>1</small></li>
  
    <li><a href="/categories/IOS/">IOS</a><small>10</small></li>
  
    <li><a href="/categories/IOS类库/">IOS类库</a><small>2</small></li>
  
    <li><a href="/categories/PHP/">PHP</a><small>1</small></li>
  
    <li><a href="/categories/blog/">blog</a><small>1</small></li>
  
    <li><a href="/categories/coretext/">coretext</a><small>4</small></li>
  
    <li><a href="/categories/mac/">mac</a><small>2</small></li>
  
    <li><a href="/categories/插件/">插件</a><small>1</small></li>
  
    <li><a href="/categories/音乐/">音乐</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Ad Hoc/" style="font-size: 15.00px;">Ad Hoc</a><a href="/tags/AppStore/" style="font-size: 15.00px;">AppStore</a><a href="/tags/CSS/" style="font-size: 10.00px;">CSS</a><a href="/tags/JDK/" style="font-size: 10.00px;">JDK</a><a href="/tags/Objective-C/" style="font-size: 17.50px;">Objective-C</a><a href="/tags/SASS/" style="font-size: 10.00px;">SASS</a><a href="/tags/SDWebImage/" style="font-size: 10.00px;">SDWebImage</a><a href="/tags/UIApplicationDelegate/" style="font-size: 10.00px;">UIApplicationDelegate</a><a href="/tags/UIImage/" style="font-size: 10.00px;">UIImage</a><a href="/tags/blog/" style="font-size: 10.00px;">blog</a><a href="/tags/bug/" style="font-size: 10.00px;">bug</a><a href="/tags/class cluster/" style="font-size: 10.00px;">class cluster</a><a href="/tags/ios/" style="font-size: 20.00px;">ios</a><a href="/tags/itunes/" style="font-size: 15.00px;">itunes</a><a href="/tags/java/" style="font-size: 10.00px;">java</a><a href="/tags/jekyll/" style="font-size: 10.00px;">jekyll</a><a href="/tags/mac/" style="font-size: 10.00px;">mac</a><a href="/tags/occurred uploading/" style="font-size: 10.00px;">occurred uploading</a><a href="/tags/uitableview/" style="font-size: 10.00px;">uitableview</a><a href="/tags/优化/" style="font-size: 15.00px;">优化</a><a href="/tags/保存数据/" style="font-size: 10.00px;">保存数据</a><a href="/tags/后台/" style="font-size: 10.00px;">后台</a><a href="/tags/基础/" style="font-size: 10.00px;">基础</a><a href="/tags/开发者/" style="font-size: 15.00px;">开发者</a><a href="/tags/类库/" style="font-size: 12.50px;">类库</a><a href="/tags/类簇/" style="font-size: 10.00px;">类簇</a><a href="/tags/苹果/" style="font-size: 12.50px;">苹果</a><a href="/tags/账号/" style="font-size: 12.50px;">账号</a><a href="/tags/进阶/" style="font-size: 10.00px;">进阶</a><a href="/tags/闪退/" style="font-size: 12.50px;">闪退</a><a href="/tags/高效/" style="font-size: 15.00px;">高效</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2014 toothpickv
  
</div>



</footer>
    </aside>
    
    
    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">Toothpick&#39;s blog</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
<h2 class="archive-title">2014</h2>


  
    
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2014/03/20/Jekyll变量 和 Jekyll模板语法教程/">Jekyll变量 和 Jekyll模板语法教程(转)</a></h1>
  

      <time datetime="2014-03-20T01:18:20.000Z"><a href="/2014/03/20/Jekyll变量 和 Jekyll模板语法教程/">3月 20 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p><strong><em>核心提示：本文主要讲述<strong>Jekyll变量 和 Jekyll模板语法教程</strong>相关内容：Jekyll变量和Jekyll模板语法，包括全局变量、Site变量、Page变量和需要注意的内容，其中变量解释内容翻译自官方wiki。</em></strong></p>
<hr>
<p><ol></p>
<p><li><a href="#jekyll-" style="color: black; text-decoration: none; background-color: transparent;">Jekyll 目录及一些说明</a></li></p>
<p><li><a href="#jekyll" style="color: black; text-decoration: none; background-color: transparent;">Jekyll的安装及配置</a></li></p>
<p><li><a href="#jekyll-2" style="color: black; text-decoration: none; background-color: transparent;">Jekyll模板全局变量</a></li></p>
<p><li><a href="#jekyllsite" style="color: black; text-decoration: none; background-color: transparent;">Jekyll模板Site变量</a></li></p>
<p><li><a href="#jekyllpage" style="color: black; text-decoration: none; background-color: transparent;">Jekyll模板Page变量</a></li></p>
<p><li><a href="#jekyllpaginator" style="color: black; text-decoration: none; background-color: transparent;">Jekyll模板Paginator变量</a></li></p>
<p><li><a href="#postpage" style="color: black; text-decoration: none; background-color: transparent;">Post或Page的创建及发布</a></li></p>
<h2 id="</ol>"></ol></h2>
<p><p style="text-indent: 24px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);">官方对 <a target="_top" href="http://higrid.net/c-tags.htm#jekyll" style="color: blue; text-decoration: none; background-color: transparent;" target="_blank">Jekyll</a> 变量 和 Jekyll模板语法教程有详细的说明， <a target="_top" href="http://higrid.net/" style="color: blue; text-decoration: none; background-color: transparent;" target="_blank">嗨网在线</a> 整理并进行了翻译，更详细介绍见<a href="http://higrid.net/c-art-blog_jekyll.htm" style="color: blue; text-decoration: none; background-color: transparent;" target="_blank">静态网站生成器jekyll详解教程</a>。Jekyll会遍历你的站点，来寻找需要处理的文件。任何具有 <code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">YAML</code> 前置数据的文件都将会被处理，每一个这样的文件，<strong>Jekyll</strong>都会通过Liquid模板系统使用许多可用的页面变量。下面是一个可用变量的列表。</p></p>
<p><h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; color: rgb(51, 51, 51); text-rendering: optimizelegibility; font-size: 1em; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(57, 125, 62); background-color: rgb(255, 255, 255);">Jekyll 目录及一些说明</h2></p>
<p><p style="text-indent: 24px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);"><em>Jekyll 标准目录树</em></p></p>
<pre style="padding: 9.5px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 20px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);">
<code style="padding: 0px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: transparent; border: 0px;">_config.yml   Jekyll的配置文件
_includes     include 文件所在的文件夹
_layouts      模版文件夹
_posts        自己要发布的内容
_sites        预览时产生的文件都放在该文件夹中
</code>
</pre>
<h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; color: rgb(51, 51, 51); text-rendering: optimizelegibility; font-size: 1em; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(57, 125, 62); background-color: rgb(255, 255, 255);">Jekyll的安装及配置</h2>
<ul style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);">
<li><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">_includes</code>文件夹中所放的文件是最终要放到模版中的一些代码片段。</li>
<li><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">_layouts</code>中放的一些模版，模版是用包含page或post内容的。Jekyll的模版使用HTML语法来写，并包含YAML Front Matter。所有的模版都可用Liquid来与网站进行交互。所的的模版都可以使用全局变量<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site</code>和<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page</code>，<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site</code>变量包含该网站所有可以接触得到的内容和元数据(meta-data)，<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page</code>变量包含的是当前渲染的page或post的所有可以接触得到的数据。</li>
<li>
<p style=" text-indent: 24px;"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">_post</code>文件夹中放的是自己要发布的post文章。post文件的命名规则为<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">YEAR-MONTH-DATE-title.MARKUP</code>，使用<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">rake post</code>会自动将post文件命名合适。而对于page，所有放在根目录下或不以下划线开头的文件夹中有格式的文件都会被Jekyll处理成page。这里说的有格式是指文件含有YAML Front Matter。所有的post和page都要用<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">markdown</code>或者<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">texile</code>或者HTML语法来写，并可以包含<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">Liquid</code>模版的语法。还要有 YAML Front Matter (Jekyll只处理具有YAML Front Matter的文件)。YAML Front Matter必须放在文件的开头，一对<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">---</code>之间，用户可在这一对<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">---</code>间设置预先定义的变量或用户自己的数据：</p>
<hr style="border-right-width: 0px; border-left-width: 0px; border-top-style: solid; border-top-color: rgb(238, 238, 238); border-bottom-style: solid; border-bottom-color: rgb(255, 255, 255);"/>
变量或用户自己的数据
<hr style="border-right-width: 0px; border-left-width: 0px; border-top-style: solid; border-top-color: rgb(238, 238, 238); border-bottom-style: solid; border-bottom-color: rgb(255, 255, 255);"/></li>
</ul>
<h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; color: rgb(51, 51, 51); text-rendering: optimizelegibility; font-size: 1em; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(57, 125, 62); background-color: rgb(255, 255, 255);">Jekyll模板全局变量</h2>
<table style="max-width: 100%; background-color: rgb(255, 255, 255); border-spacing: 0px; border-width: 1px 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-top-color: rgb(221, 221, 221); border-right-color: rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px;">
<thead>
<tr>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-left-radius: 4px;"><strong>变量</strong></th>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-right-radius: 4px;"><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">全站的信息+<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">_config.yml</code>文件中的配置选项</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">这个变量中包含YAML前置数据,另外加上两个额外的变量值:<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">url</code>和<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">content</code>。</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">content</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">在布局模板文件中，这里变量包含了页面的子视图。这个变量将会把渲染后的内容插入到模板文件中。这个变量不能在文章和页面文件中使用。</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-bottom-left-radius: 4px;"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-bottom-right-radius: 4px;">一旦<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginate</code>配置选项被设置了，这个变量才能被使用。</td>
</tr>
</tbody>
</table>
<h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; color: rgb(51, 51, 51); text-rendering: optimizelegibility; font-size: 1em; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(57, 125, 62); background-color: rgb(255, 255, 255);">Jekyll模板Site变量</h2>
<table style="max-width: 100%; background-color: rgb(255, 255, 255); border-spacing: 0px; border-width: 1px 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-top-color: rgb(221, 221, 221); border-right-color: rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px;">
<thead>
<tr>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-left-radius: 4px;"><strong>变量</strong></th>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-right-radius: 4px;"><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site.time</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">当前的时间(当你运行Jekyll时的时间)</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site.posts</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">一个按时间逆序的文章列表。</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site.related_posts</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">如果当前被处理的页面是一个文章文件，那这个变量是一个包含了最多10篇相关文章的列表。默认来说，这些相关文章是低质量但计算快的。为了得到高质量但计算慢的结果，运行Jekyll命令时可以加上<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">--lsi</code>选项。(潜在语意索引)</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site.categories.CATEGORY</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">所有在<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">CATEGORY</code>分类中的文章列表</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site.tags.TAG</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">所有拥有<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">TAG</code>标签的文章的列表</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-bottom-left-radius: 4px;"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site.[CONFIGURATION_DATA]</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-bottom-right-radius: 4px;">截止<strong>0.5.2</strong>版本，所有在<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">_config.yml</code>中的数据都能够通过<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">site</code>变量调用。举例来说，如果你有一个这样的选项在你的配置文件中:<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">url: <a href="http://higrid.net" target="_blank">http://higrid.net</a></code>，那在文章和页面文件中可以这样调用<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">{ { site.url } }</code>。Jekyll并不会自动解析修改过的<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">_config.yml</code>文件，你想要启用新的设置选项，你需要重启Jekyll</td>
</tr>
</tbody>
</table>
<h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; color: rgb(51, 51, 51); text-rendering: optimizelegibility; font-size: 1em; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(57, 125, 62); background-color: rgb(255, 255, 255);">Jekyll模板Page变量</h2>
<table style="max-width: 100%; background-color: rgb(255, 255, 255); border-spacing: 0px; border-width: 1px 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-top-color: rgb(221, 221, 221); border-right-color: rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px;">
<thead>
<tr>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-left-radius: 4px;"><strong>变量</strong></th>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-right-radius: 4px;"><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.content</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">页面中未渲染的内容</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.title</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">文章的标题</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.url</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">除去域名以外的URL，例子:<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">/2013/12/14/higrid-net.html</code></td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.date</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">指定每一篇文章的时间，这个选项能够覆盖一篇文章中前置数据设置的时间，它的格式是这样的:<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">YYYY-MM-DD HH:MM:SS</code></td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;"><a href="http://page.id" target="_blank">page.id</a></code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">每一篇文章的唯一标示符(在RSS中非常有用) 例子：/2008/12/14/higrid-net</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.categories</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">这篇文章隶属的分类的一个列表，分类是通过在<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">_post</code>目录中的目录结构推导而来的。举例来说，在路径<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">/work/code/_posts/2008-12-24-closures.textile</code>下的文件，这个变量将会是<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">[work,code]</code>。这个变量也能在YAML前置数据中被指定。</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.tags</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">这篇文章的标签的列表。这些数据能够在YAML前置数据中指定</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.next</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">按时间序的下一篇文章</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249); border-bottom-left-radius: 4px;"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.content</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249); border-bottom-right-radius: 4px;">按时间序的上一篇文章</td>
</tr>
</tbody>
</table>
<p style="text-indent: 24px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);"><strong>注意</strong>:任何你自己指定的自定义前置数据都能够通过<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page</code>调用。举例来说，如果你在页面的前置数据中设置了<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">custom_css: true</code>，那这个值可以在模板可以这样调用:<code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">page.custom_css</code></p>
<h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; color: rgb(51, 51, 51); text-rendering: optimizelegibility; font-size: 1em; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(57, 125, 62); background-color: rgb(255, 255, 255);">Jekyll模板Paginator变量</h2>
<table style="max-width: 100%; background-color: rgb(255, 255, 255); border-spacing: 0px; border-width: 1px 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-top-color: rgb(221, 221, 221); border-right-color: rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px;">
<thead>
<tr>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-left-radius: 4px;"><strong>变量</strong></th>
<th style="padding: 4px 5px; vertical-align: bottom; border-top-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-top-right-radius: 4px;"><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator.per_page</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">每一个页面上文章的数量</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator.posts</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">当前页面上可用的文章</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator.total_posts</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">所有文章的数量</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator.total_pages</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">所有页面的数量</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator.page</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249);">当前页面的数量</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator.previous_page</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221);">前面的页面的数量</td>
</tr>
<tr>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249); border-bottom-left-radius: 4px;"><code style="padding: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; white-space: nowrap; background-color: inherit; border: none;">paginator.next_page</code></td>
<td style="padding: 4px 5px; vertical-align: top; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); background-color: rgb(249, 249, 249); border-bottom-right-radius: 4px;">接下来的的页面的数量</td>
</tr>
</tbody>
</table>
<blockquote style="padding: 0px 0px 0px 35px; border: inherit; background-image: url(http://higrid.net/docs/img/blockquote.gif); background-attachment: scroll; background-color: rgb(255, 255, 255); color: rgb(116, 116, 116); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;">
<p style="font-size: inherit; line-height: 1.25; text-indent: 24px;">原文地址: <a href="https://github.com/mojombo/jekyll/wiki/Template-Data" target="_blank">https://github.com/mojombo/jekyll/wiki/Template-Data</a></p>
</blockquote>
<h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; color: rgb(51, 51, 51); text-rendering: optimizelegibility; font-size: 1em; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(57, 125, 62); background-color: rgb(255, 255, 255);">Post或Page的创建及发布</h2>
<p style="text-indent: 24px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);"><em>创建Post文章</em></p>
<pre style="padding: 9.5px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 20px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);">
<code style="padding: 0px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: transparent; border: 0px;">rake post title="文章标题"
</code>
</pre>
<p style="text-indent: 24px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);">会自动创建一个具有合适文件名和YAML Front Matter的文件(使用时将"文章标题"替换成你要创建的文章的标题)。</p>
<p style="text-indent: 24px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);"><em>创建Page页面</em></p>
<pre style="padding: 9.5px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 20px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);">
<code style="padding: 0px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: transparent; border: 0px;">rake page name="<a href="http://%E9%A1%B5%E9%9D%A2%E5%90%8D%E7%A7%B0.md" target="_blank">页面名称.md</a>"   或者
rake page name="pages/页面名称.md"
</code>
</pre>
<p style="text-indent: 24px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; line-height: 20px; background-color: rgb(255, 255, 255);"><em>发布Post或Page</em></p>
<pre style="padding: 9.5px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 20px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);">
<code style="padding: 0px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: inherit; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: transparent; border: 0px;">git add .
git commit -m '一些说明'
git push origin master</code>
</pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/u/2049029440"><strong>牙-_签</strong></a> - 3月 20 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://toothpick2012.github.io/"><strong>Toothpick&#39;s blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2014/03/11/类簇在iOS开发中的应用/">类簇在iOS开发中的应用(转)</a></h1>
  

      <time datetime="2014-03-11T09:06:40.000Z"><a href="/2014/03/11/类簇在iOS开发中的应用/">3月 11 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>类簇(class cluster)是一种设计模式，在Foundation Framework中被广泛使用，举个简单的例子</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="built_in">NSArray</span> *arr = [<span class="built_in">NSArray</span> arrayWithObjects:@<span class="string">"foo"</span>,@<span class="string">"bar"</span>, <span class="literal">nil</span>]; 
<span class="built_in">NSLog</span>(@<span class="string">"arr class:%@"</span>, [arr class]); 
<span class="comment">// output: __NSArrayI</span>
</pre></td></tr></table></figure>

<p>显然__NSArrayI是一个私有类，来看看这个类的头文件</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>@interface __NSArrayI : NSArray { 
    unsigned int _used; 
} 
//<span class="keyword">...</span>
</pre></td></tr></table></figure>


<p>可以看出__NSArrayI继承了NSArray。为什么要这么设计呢？拿NSNumber来举个例子，我们都知道NSNumber可以存储多种类型的数字，如Int/Float/Double等等，一种方式是把NSNumber作为基类，然后分别去实现各自的子类，像这样：<br> ![此处输入图片的描述][1]<br>初看起来也没什么问题，但如果子类很多，像这样：<br>![此处输入图片的描述][2]</p>
<p>这对使用者来说显然不够方便，得记住这么多类。如果使用类簇，问题就变得简单了，把Number作为抽象基类，子类各自实现存取方式，然后在基类中定义多个初始化方式，像这样：<br>![此处输入图片的描述][3]</p>
<p>现在只需要记住一个类就可以了。NSNumber的初始化伪代码大概像这样：</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre>- (id)initWithBool 
{ 
    <span class="keyword">return</span> [[__NSCFBoolean alloc]init]; 
} 
 
- (id)initWithLong 
{ 
    <span class="keyword">return</span> [[__NSCFNumber alloc]init]; 
} 
 
//<span class="keyword">...</span>
</pre></td></tr></table></figure>

<h1 id="在iOS项目中的应用">在iOS项目中的应用</h1>
<hr>
<p>在开发app时经常会遇到表现和行为完全一样，但数据源不一样的情况。以花瓣app为例，同样是瀑布流，可能来自我喜欢的图片、某个画板下的图片、某个用户的图片等等。如果为每一种表现方式都新建一个Controller，并且使用这个Controller来初始化，那么就会遇到最开始提到的问题：子类太多，使用不便。这正好可以通过类簇来很方便地搞定。比如这样：</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="class"><span class="keyword">@implementation</span> <span class="title">HBWaterfallViewController</span> </span>
- (<span class="keyword">id</span>)initWithLiked 
{ 
    <span class="keyword">return</span> [[HBLikedViewController alloc]init]; 
} 
  
- (<span class="keyword">id</span>)initWithBoardID:(<span class="built_in">NSInteger</span>)boardID 
{ 
    <span class="keyword">return</span> [[HBBoardViewController alloc]initWithBoardID:boardID]; 
}
</pre></td></tr></table></figure>

<h2 id="pragma_mark_-_通用的方法">pragma mark - 通用的方法</h2>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>- (PSUICollectionViewCell *)collectionView:(PSUICollectionView *)collectionView 
                    cellForItemAtIndexPath:(NSIndexPath *)indexPath 
{ 
    // <span class="keyword">...</span> 
} 
  
// <span class="keyword">...</span>
</pre></td></tr></table></figure>

<h2 id="pragma_mark_-_每个子类需要实现的方法">pragma mark - 每个子类需要实现的方法</h2>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="pp">- <span class="params">(void)</span>fetchMoreData 
{ 
    NSAssert<span class="params">(<span class="variable">NO</span>, @<span class="string">"子类需要实现此方法"</span>)</span>; 
}</span>
</pre></td></tr></table></figure>

<p>使用起来类似这样[[HBWaterfallViewController alloc]initWithBoardID:9527] 或 [[HBWaterfallViewController alloc]initWithLiked]。如果有新的DataSource，新加一个初始化方法即可，对于使用者来说，打开头文件，看下init开头的方法就行了。</p>
<p>再举个例子，现在很多应用需要同时兼顾iOS6和iOS7，在表现上需要为不同的系统加载不同的图片资源，最简单粗暴的方法就是各种if/else判断，像这样：</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="tag">if</span> (<span class="attr_selector">[[UIDevice currentDevice]</span><span class="tag">systemMajorVersion</span>] &lt; 7) 
<span class="rules">{ 
    <span class="comment">/* iOS 6 and previous versions */</span> 
<span class="rule">}</span></span> 
<span class="tag">else</span> 
<span class="rules">{ 
    <span class="comment">/* iOS 7 and above */</span> 
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<p>不够优雅，可以使用类簇的思想来去掉if/else判断，把跟视图具体元素无关的代码放在基类，跟系统版本相关的代码拆成两个子类，然后在各自的类中加载相应的资源。</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="code"><pre><span class="comment">/* TestView.h */</span> 
<span class="class"><span class="keyword">@interface</span> <span class="title">TestView</span>: <span class="title">UIView</span> </span>
 
<span class="comment">/* Common method */</span> 
- ( <span class="keyword">void</span> )test; 
 
<span class="keyword">@end</span> 
 
<span class="comment">/* TestView.m */</span> 
<span class="class"><span class="keyword">@implementation</span> <span class="title">TestView</span> </span>
 
+ (<span class="keyword">id</span>)alloc 
{ 
    <span class="keyword">if</span> ([<span class="keyword">self</span> class]== [TestView class]) 
    { 
        <span class="keyword">if</span> ([[UIDevice currentDevice] systemMajorVersion] &lt; <span class="number">7</span>) 
        { 
            <span class="keyword">return</span> [TestViewIOS6 alloc]; 
        } 
        <span class="keyword">else</span> 
        { 
            <span class="keyword">return</span> [TestViewIOS7 alloc]; 
        } 
    } 
    <span class="keyword">else</span> 
    { 
        <span class="keyword">return</span> [<span class="keyword">super</span> alloc]; 
    } 
} 
 
- ( <span class="keyword">void</span> )test 
{} 
 
<span class="keyword">@end</span>
</pre></td></tr></table></figure>

<p>这里alloc时并没有返回TestView类，而是根据系统版本返回TestViewIOS6 或 TestViewIOS7。</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="comment">/* TestViewIOS6.m */</span> 
<span class="class"><span class="keyword">@implementation</span> <span class="title">TestViewIOS6</span>: <span class="title">TestView</span> </span>
 
- (<span class="keyword">void</span>)drawRect: (<span class="built_in">CGRect</span>)rect 
{ 
    <span class="comment">/* Custom iOS6 drawing code */</span> 
} 
 
<span class="keyword">@end</span> 
 
<span class="comment">/* TestViewIOS7.m */</span> 
<span class="class"><span class="keyword">@implementation</span> <span class="title">TestViewIOS7</span> </span>
 
- (<span class="keyword">void</span>)drawRect: (<span class="built_in">CGRect</span>)rect 
{ 
    <span class="comment">/* Custom iOS7 drawing code */</span> 
} 
 
<span class="keyword">@end</span>
</pre></td></tr></table></figure>

<h1 id="小结">小结</h1>
<hr>
<p>类簇的本质其实是抽象工厂，类簇也可以有多个基类，如NSArray, NSMutableArray, 后者就是继承的前者。它对一些「大同小异」的问题，往往会有不错的效果。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/u/2049029440"><strong>牙-_签</strong></a> - 3月 11 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://toothpick2012.github.io/"><strong>Toothpick&#39;s blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2014/03/11/减少上线应用的崩溃情况/">减少上线应用的崩溃情况</a></h1>
  

      <time datetime="2014-03-11T06:42:55.000Z"><a href="/2014/03/11/减少上线应用的崩溃情况/">3月 11 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>应用上线后，在umeng或是百度移动统计里面经常会有NSRangeException，NSInvalidArgumentException等这类错误，而且通常都是占据了很大比例。<br>你能看到的错误详情可能是这样：(很庆幸我们还是可以找到具体出错的位置，但是上千个类似错误成分散分布在不同位置，那就别扯蛋了！！)</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>*** Terminating app due to uncaught exception <span class="string">'NSRangeException'</span>, reason: <span class="string">'*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'</span>
详细错误信息:
 ....
<span class="number">2</span>   CoreFoundation                      <span class="number">0x2f20dd95</span> -[__NSArrayM objectAtIndex:] + <span class="number">232</span>
<span class="number">3</span>   nineteenlou                         <span class="number">0x001357a7</span> -[UserViewController tableView:didSelectRowAtIndexPath:] + <span class="number">158</span>
<span class="number">4</span>   UIKit                               <span class="number">0x31b790cb</span> -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + <span class="number">1078</span>
<span class="number">5</span>   UIKit                               <span class="number">0x31c2c863</span> -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + <span class="number">214</span>
<span class="keyword">...</span>
</pre></td></tr></table></figure>

<p>发生错误原因，有的是多线程block造成的，还有接口返回数据解析问题，还有其他乱七八糟问题。<br>应用的体验是建立在不崩溃的基础之上的。如果是这样，那必须动武的啦。最佳的方法，就是用swizzle替换数组的方法，判断越界等出现崩溃的情况。</p>
<p>OK，废话多了，自写的个类SafeMode，上代码吧。<br>也可以下载例子:<a href="https://github.com/Toothpick2012/SafeMode" target="_blank">https://github.com/Toothpick2012/SafeMode</a></p>
<p>SafeMode.h</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre>#import &lt;Foundation/Foundation.h&gt;
#import &lt;objc/runtime.h&gt;

@<span class="keyword">interface</span> SafeMode:NSObject
+ (void)safe;
+ (void)exchangeOriginalMethod:(<span class="function"><span class="keyword">Method</span>)<span class="title">originalMethod</span> <span class="title">withNewMethod</span>:</span>(<span class="function"><span class="keyword">Method</span>)<span class="title">newMethod</span>;</span>
@<span class="keyword">end</span>

@<span class="keyword">interface</span> NSArray (Safe)
+ (<span class="function"><span class="keyword">Method</span>)<span class="title">methodOfSelector</span>:</span>(SEL)<span class="keyword">selector</span>;
- (id)objectAtIndexOrNil:(NSUInteger)<span class="keyword">index</span>;
@<span class="keyword">end</span>


@<span class="keyword">interface</span> NSMutableArray (Safe)
+ (<span class="function"><span class="keyword">Method</span>)<span class="title">methodOfSelector</span>:</span>(SEL)<span class="keyword">selector</span>;
- (id)objectAtIndexOrNilM:(NSUInteger)<span class="keyword">index</span>;
- (void)safe_replaceObjectAtIndex:(NSUInteger)<span class="keyword">index</span> withObject:(id)anObject;
@<span class="keyword">end</span>
</pre></td></tr></table></figure>

<p>SafeMode.m</p>
<figure class="highlight Objective-C"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre></td><td class="code"><pre><span class="preprocessor">#import <span class="title">"SafeMode.h"</span></span>

<span class="class"><span class="keyword">@implementation</span> <span class="title">SafeMode</span></span>

+ (<span class="keyword">void</span>)safe
{
    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;
    <span class="built_in">dispatch_once</span>(&onceToken, ^{
        <span class="comment">//NSArray</span>
        [<span class="keyword">self</span> exchangeOriginalMethod:[<span class="built_in">NSArray</span> methodOfSelector:<span class="keyword">@selector</span>(objectAtIndex:)] withNewMethod:[<span class="built_in">NSArray</span> methodOfSelector:<span class="keyword">@selector</span>(objectAtIndexOrNil:)]];
        
        <span class="comment">//NSMutableArray</span>
        [<span class="keyword">self</span> exchangeOriginalMethod:[<span class="built_in">NSMutableArray</span> methodOfSelector:<span class="keyword">@selector</span>(objectAtIndex:)] withNewMethod:[<span class="built_in">NSMutableArray</span> methodOfSelector:<span class="keyword">@selector</span>(objectAtIndexOrNilM:)]];
        [<span class="keyword">self</span> exchangeOriginalMethod:[<span class="built_in">NSMutableArray</span> methodOfSelector:<span class="keyword">@selector</span>(replaceObjectAtIndex:withObject:)] withNewMethod:[<span class="built_in">NSMutableArray</span> methodOfSelector:<span class="keyword">@selector</span>(safe_replaceObjectAtIndex:withObject:)]];
}

+ (<span class="keyword">void</span>)exchangeOriginalMethod:(Method)originalMethod withNewMethod:(Method)newMethod
{
    method_exchangeImplementations(originalMethod, newMethod);
}

<span class="keyword">@end</span>

<span class="class"><span class="keyword">@implementation</span> <span class="title">NSArray</span> (<span class="title">Safe</span>)</span>

<span class="preprocessor">#pragma mark - NSArray</span>
+ (Method)methodOfSelector:(SEL)selector
{
    <span class="keyword">return</span> class_getInstanceMethod(NSClassFromString(@<span class="string">"__NSArrayI"</span>),selector);
}


- (<span class="keyword">id</span>)objectAtIndexOrNil:(NSUInteger)index
{
    <span class="keyword">return</span> (index &lt; [<span class="keyword">self</span> count]) ? [<span class="keyword">self</span> objectAtIndexOrNil:index] : <span class="literal">nil</span>;
}

<span class="keyword">@end</span>


<span class="class"><span class="keyword">@implementation</span> <span class="title">NSMutableArray</span> (<span class="title">Safe</span>)</span>


<span class="preprocessor">#pragma mark - NSMutableArray</span>
+ (Method)methodOfSelector:(SEL)selector
{
    <span class="keyword">return</span> class_getInstanceMethod(NSClassFromString(@<span class="string">"__NSArrayM"</span>),selector);
}

- (<span class="keyword">id</span>)objectAtIndexOrNilM:(NSUInteger)index
{
    <span class="keyword">return</span> (index &lt; [<span class="keyword">self</span> count]) ? [<span class="keyword">self</span> objectAtIndexOrNilM:index] : <span class="literal">nil</span>;
}

- (<span class="keyword">void</span>)safe_replaceObjectAtIndex:(NSUInteger)index withObject:(<span class="keyword">id</span>)anObject
{
    <span class="keyword">if</span> ((index &lt; [<span class="keyword">self</span> count])&&anObject) {
        [<span class="keyword">self</span> safe_replaceObjectAtIndex:index withObject:anObject];
    }
}

<span class="keyword">@end</span>
</pre></td></tr></table></figure>

<p>当然，还有其他类似的问题可以在类里面添加方法。这样，上线应用可以避免出现崩溃。另外数组的objectAtIndex:方法的类不是NSArray，而是__NSArrayI，这个可以参考<a href="http://toothpick2012.github.com/2014/03/11/%E7%B1%BB%E7%B0%87%E5%9C%A8iOS%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/" target="_blank">类簇在iOS开发中的应用</a></p>
<p><strong><em>ps：测试时最好不开启，免得一些bug难以发现。</em></strong></p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/u/2049029440"><strong>牙-_签</strong></a> - 3月 11 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://toothpick2012.github.io/"><strong>Toothpick&#39;s blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
  
</nav>
</div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">首页</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">归档</a></div>
    
      <div class="tabbaritem"><a class="next" href="/about/">关于</a></div>
    
      <div class="tabbaritem"><a class="next" href="/atom.xml">订阅</a></div>
    
</div>


  </div>
</body>
</html>