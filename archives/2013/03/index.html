<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>归档：2013/3 | Toothpick</title>
  <meta name="author" content="toothpickv">
  
  
  
  <meta property="og:site_name" content="Toothpick"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="http://xxx.xx/atom.xml" title="Toothpick" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">Toothpick</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="/about/">About</a><li>
    
      <li class="cell"><a class="next" href="/atom.xml">Subscribe</a><li>
    
    </ul>
</nav>

  <div class="widget weibo">
<iframe width="100%" height="100" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=110&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=0&isWeibo=0&isFans=0&uid=null&verifier=78e1ee4d&colors=ffffff,ffffff,999,000,ecfbfd&dpc=1"></iframe>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/CSS/">CSS</a><small>1</small></li>
  
    <li><a href="/categories/IOS/">IOS</a><small>8</small></li>
  
    <li><a href="/categories/IOS类库/">IOS类库</a><small>2</small></li>
  
    <li><a href="/categories/PHP/">PHP</a><small>1</small></li>
  
    <li><a href="/categories/coretext/">coretext</a><small>4</small></li>
  
    <li><a href="/categories/mac/">mac</a><small>2</small></li>
  
    <li><a href="/categories/插件/">插件</a><small>1</small></li>
  
    <li><a href="/categories/音乐/">音乐</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Ad Hoc/" style="font-size: 12.50px;">Ad Hoc</a><a href="/tags/AppStore/" style="font-size: 12.50px;">AppStore</a><a href="/tags/CSS/" style="font-size: 10.00px;">CSS</a><a href="/tags/JDK/" style="font-size: 10.00px;">JDK</a><a href="/tags/Objective-C/" style="font-size: 17.50px;">Objective-C</a><a href="/tags/SASS/" style="font-size: 10.00px;">SASS</a><a href="/tags/SDWebImage/" style="font-size: 10.00px;">SDWebImage</a><a href="/tags/UIApplicationDelegate/" style="font-size: 10.00px;">UIApplicationDelegate</a><a href="/tags/UIImage/" style="font-size: 10.00px;">UIImage</a><a href="/tags/bug/" style="font-size: 10.00px;">bug</a><a href="/tags/ios/" style="font-size: 20.00px;">ios</a><a href="/tags/itunes/" style="font-size: 12.50px;">itunes</a><a href="/tags/java/" style="font-size: 10.00px;">java</a><a href="/tags/mac/" style="font-size: 10.00px;">mac</a><a href="/tags/occurred uploading/" style="font-size: 10.00px;">occurred uploading</a><a href="/tags/uitableview/" style="font-size: 10.00px;">uitableview</a><a href="/tags/优化/" style="font-size: 15.00px;">优化</a><a href="/tags/保存数据/" style="font-size: 10.00px;">保存数据</a><a href="/tags/后台/" style="font-size: 10.00px;">后台</a><a href="/tags/开发者/" style="font-size: 10.00px;">开发者</a><a href="/tags/类库/" style="font-size: 12.50px;">类库</a><a href="/tags/苹果/" style="font-size: 10.00px;">苹果</a><a href="/tags/账号/" style="font-size: 10.00px;">账号</a><a href="/tags/闪退/" style="font-size: 12.50px;">闪退</a><a href="/tags/高效/" style="font-size: 15.00px;">高效</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2014 toothpickv
  
</div>



</footer>
    </aside>
    
    
    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">Toothpick</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
<h2 class="archive-title">2013/3</h2>


  
    
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/2013/03/25/calayer与uiview的关系/">CALayer与UIView的关系</a></h1>
  

      <time datetime="2013-03-25T05:36:49.000Z"><a href="/2013/03/25/calayer与uiview的关系/">Mar 25 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>CALayer属于Core Animation部分的内容，比较重要而不太好理解。以下是园子中看到的一篇文章的摘录：</p>
<p><span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">1. UIView是iOS系统中界面元素的基础</span>，所有的界面元素都是继承自它。它本身完全是由CoreAnimation来实现的。<span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">它真正的绘图部分，是由一个CALayer类来管理</span>。UIView本身更像是一个CALayer的管理器，访问它的跟绘图和跟坐标有关的属性，例如frame，bounds等，实际上内部都是在访问它所包含的CALayer的相关属性。</p>
<p><span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">2. UIView有个重要属性layer，可以返回它的主CALayer实例。
</span></p>
<div style="font-size:14px;color:#333333;line-height:26px;background-color:#ffffff;margin:5px 0px;padding:5px;font-family:&#39;courier new&#39;;border:1px solid #cccccc;overflow:auto;"><pre style="word-wrap:break-word;padding:0px;font-family:&#39;courier new&#39;;margin-top:0px;margin-bottom:0px;"><span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#008000;">//</span><span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#008000;"> 要访问层，读取UIView实例的layer属性</span><span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#008000;">
</span>CALayer *layer = myView.layer
</pre></div>

<p>所有从UIView继承来的对象都继承了这个属性。这意味着你可以转换、缩放、旋转，甚至可以在Navigation bars，Tables，Text boxes等其它的View类上增加动画。每个UIView都有一个层，控制着各自的内容最终被显示在屏幕上的方式。
UIView的layerClass方法，可以返回主layer所使用的类，UIView的子类可以通过重载这个方法，来让UIView使用不同的CALayer来显示。代码示例：</p>
<div style="font-size:14px;color:#333333;line-height:26px;background-color:#ffffff;margin:5px 0px;padding:5px;font-family:&#39;courier new&#39;;border:1px solid #cccccc;overflow:auto;"><pre style="word-wrap:break-word;padding:0px;font-family:&#39;courier new&#39;;margin-top:0px;margin-bottom:0px;">- (<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#0000ff;">class</span>)layerClass {
<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#0000ff;">return</span> ([CAEAGLLayer <span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#0000ff;">class</span>]);

}
</pre></div>

<p>上述代码使得某个UIView的子类使用GL来进行绘制。</p>
<p><span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">3. UIView的CALayer类似UIView的子View树形结构</span>，也可以向它的layer上添加子layer，来完成某些特殊的表示。即CALayer层是可以嵌套的。示例代码：</p>
<div style="font-size:14px;color:#333333;line-height:26px;background-color:#ffffff;margin:5px 0px;padding:5px;font-family:&#39;courier new&#39;;border:1px solid #cccccc;overflow:auto;"><pre style="word-wrap:break-word;padding:0px;font-family:&#39;courier new&#39;;margin-top:0px;margin-bottom:0px;">grayCover = [[CALayer alloc] init];

grayCover.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">0.2</span>] CGColor];

[self.layer addSubLayer:grayCover];
</pre></div>

<p>上述代码会在目标View上敷上一层黑色透明薄膜的效果。</p>
<p><span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">4. UIView的layer树形在系统内部，被维护着三份copy。</span>分别是逻辑树，这里是代码可以操纵的；动画树，是一个中间层，系统就在这一层上更改属性，进行各种渲染操作；显示树，其内容就是当前正被显示在屏幕上得内容。</p>
<p><span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">5. 动画的运作：对UIView的subLayer（非主Layer）属性进行更改，系统将自动进行动画生成</span>，动画持续时间的缺省值似乎是0.5秒。</p>
<p><span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">6. 坐标系统：CALayer的坐标系统比UIView多了一个anchorPoint属性，使用CGPoint结构表示，值域是0~1，是个比例值。</span>这个点是各种图形变换的坐标原点，同时会更改layer的position的位置，它的缺省值是{0.5,0.5}，即在layer的中央。
某layer.anchorPoint = CGPointMake(0.f,0.f);
如果这么设置，只会将layer的左上角被挪到原来的中间位置，必须加上这一句：
某layer.position = CGPointMake(0.f,0.f);</p>
<p>最后：layer可以设置圆角显示（cornerRadius），也可以设置阴影 <wbr>(shadowColor)。但是如果layer树中某个layer设置了圆角，树种所有layer的阴影效果都将不显示了。因此若是要有圆角又要阴影，变通方法只能做两个重叠的UIView，一个的layer显示圆角，一个layer显示阴影......</wbr></p>
<p><span style="word-wrap:normal;word-break:normal;line-height:24px;margin:0px;padding:0px;font-size:16px;"><span style="word-wrap:normal;word-break:normal;margin:0px;padding:0px;">7.渲染</span>：</span>当更新层，改变不能立即显示在屏幕上。当所有的层都准备好时，可以调用setNeedsDisplay方法来重绘显示。</p>
<div style="font-size:14px;color:#333333;line-height:26px;background-color:#ffffff;margin:5px 0px;padding:5px;font-family:&#39;courier new&#39;;border:1px solid #cccccc;overflow:auto;"><pre style="word-wrap:break-word;padding:0px;font-family:&#39;courier new&#39;;margin-top:0px;margin-bottom:0px;">[gameLayer setNeedsDisplay];
</pre></div>

<p>若要重绘部分屏幕区域，请使用setNeedsDisplayInRect:方法，通过在CGRect结构的区域更新：</p>
<div style="font-size:14px;color:#333333;line-height:26px;background-color:#ffffff;margin:5px 0px;padding:5px;font-family:&#39;courier new&#39;;border:1px solid #cccccc;overflow:auto;"><pre style="word-wrap:break-word;padding:0px;font-family:&#39;courier new&#39;;margin-top:0px;margin-bottom:0px;">[gameLayer setNeedsDisplayInRect:CGRectMake(<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">150.0</span>,<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">100.0</span>,<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">50.0</span>,<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">75.0</span>)];
</pre></div>

<p>如果是用的Core Graphics框架来执行渲染的话，可以直接渲染Core Graphics的内容。用renderInContext:来做这个事。</p>
<div style="font-size:14px;color:#333333;line-height:26px;background-color:#ffffff;margin:5px 0px;padding:5px;font-family:&#39;courier new&#39;;border:1px solid #cccccc;overflow:auto;"><pre style="word-wrap:break-word;padding:0px;font-family:&#39;courier new&#39;;margin-top:0px;margin-bottom:0px;">[gameLayer renderInContext:UIGraphicsGetCurrentCont<wbr>ext()];</wbr></pre></div>

<p><span style="word-wrap:normal;word-break:normal;line-height:24px;margin:0px;padding:0px;font-size:16px;">8.变换：</span>要在一个层中添加一个3D或仿射变换，可以分别设置层的transform或affineTransform属性。</p>
<div style="font-size:14px;color:#333333;line-height:26px;background-color:#ffffff;margin:5px 0px;padding:5px;font-family:&#39;courier new&#39;;border:1px solid #cccccc;overflow:auto;"><pre style="word-wrap:break-word;padding:0px;font-family:&#39;courier new&#39;;margin-top:0px;margin-bottom:0px;">characterView.layer.transform = CATransform3DMakeScale(-<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">1.0</span>,-<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">1.0</span>,<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">1.0</span>);

CGAffineTransform transform = CGAffineTransformMakeRot<wbr>ation(<span style="word-wrap:normal;word-break:normal;line-height:21px;margin:0px;padding:0px;color:#800080;">45.0</span>);
backgroundView.layer.affineTransform = transform;</wbr></pre></div>

<p><span style="word-wrap:normal;word-break:normal;line-height:24px;margin:0px;padding:0px;font-size:16px;">9.变形：</span>Quartz Core的渲染能力，使二维图像可以被自由操纵，就好像是三维的。图像可以在一个三维坐标系中以任意角度被旋转，缩放和倾斜。CATransform3D的一套方法提供了一些魔术般的变换效果。</p>
<p><span class="span4br"></span></p>
<p><span class="span4br"></span></p>
<p><span class="span4br"></span></p>
<p> <span class="span4br"></span></p>
<div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">CALayer(层)是屏幕上的一个矩形区域，在每一个UIView中都包含一个根CALayer，在UIView上的所有视觉效果都是在这个Layer上进行的。</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">CALayer外形特征主要包括：
1、层的大小尺寸
2、背景色
3、内容（可以填充图片或者使用Core Graphics绘制的内容）
4、矩形是否使用圆角
5、矩形是否有阴影</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">Layer有很多种，最常用也是最基本的是CALayer，当然还包括其他的子类：
CAScrollerLayer 简化显示层的一部分
CATextLayer 文本层
CAGradientLayer、CAShapeLayer等等</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><div style="padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">使用层之前，需要在项目中引入QuartzCore.framework框架</span></span></div>

<p><a href="http://img1.51cto.com/attachment/201209/224142245.png" target="_blank"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;"><img src="http://img1.51cto.com/attachment/201209/224142245.png" alt="" title="CALayer与UIView的关系"></span></span></a></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span>
</div><pre style="line-height:21px;padding:0px;background-color:#f7f7f7;font-family:&#39;courier new&#39;, monospace;font-size:12px;overflow:auto;width:712px;color:#555555;text-align:-webkit-auto;margin-top:0px;"></pre></p>
<ol>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:gray;background-color:inherit;">#import <wbr>&quot;LayerSampleViewControlle<wbr>r.h&quot;</wbr></wbr></span> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">@implementation <wbr>LayerSampleViewControlle<wbr>r <span class="span4br"></span></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">// <wbr>Implement <wbr>loadView <wbr>to <wbr>create <wbr>a <wbr>view <wbr>hierarchy <wbr>programmatically, <wbr>without <wbr>using <wbr>a <wbr>nib.</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">- <wbr>(<span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">void</span>)loadView <wbr>{ <span class="span4br"></span></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>UIView <wbr>*rootView <wbr>= <wbr>[[UIView <wbr>alloc] <wbr>initWithFrame:CGRectMake(0, <wbr>0, <wbr>1024, <wbr>768)]; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>rootView.backgroundColor <wbr>= <wbr>[UIColor <wbr>whiteColor]; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>self.view <wbr>= <wbr>rootView; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>[rootView <wbr>release]; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">//加载layer</span> <span class="span4br"></span></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>backLayer <wbr>= <wbr>[CALayer <wbr>layer]; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>backLayer.backgroundColor <wbr>= <wbr>[UIColor <wbr>orangeColor].CGColor; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>backLayer.bounds <wbr>= <wbr>CGRectMake(10, <wbr>10, <wbr>1004, <wbr>728); <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">//设置layer的区域</span> <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>backLayer.position <wbr>= <wbr>CGPointMake(1024/2, <wbr>768/2-10); <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">//设置layer坐标</span> <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>[self.view.layer <wbr>addSublayer:backLayer]; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">} <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">// <wbr>Override <wbr>to <wbr>allow <wbr>orientations <wbr>other <wbr>than <wbr>the <wbr>default <wbr>portrait <wbr>orientation.</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">- <wbr>(<span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#2e8b57;background-color:inherit;font-weight:bold;">BOOL</span>)shouldAutorotateToInterf<wbr>aceOrientation:(UIInterfaceOrientation)interfaceOrientation <wbr>{ <span class="span4br"></span></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">return</span> <wbr>interfaceOrientation <wbr>== <wbr>UIInterfaceOrientationLa<wbr>ndscapeLeft; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">} <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">- <wbr>(<span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">void</span>)didReceiveMemoryWarning <wbr>{ <span class="span4br"></span></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">// <wbr>Releases <wbr>the <wbr>view <wbr>if <wbr>it <wbr>doesn&#39;t <wbr>have <wbr>a <wbr>superview.</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span> <span class="span4br"></span></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>[super <wbr>didReceiveMemoryWarning]; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">// <wbr>Release <wbr>any <wbr>cached <wbr>data, <wbr>images, <wbr>etc <wbr>that <wbr>aren&#39;t <wbr>in <wbr>use.</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span> <span class="span4br"></span></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">} <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">- <wbr>(<span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">void</span>)viewDidUnload <wbr>{ <span class="span4br"></span></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">// <wbr>Release <wbr>any <wbr>retained <wbr>subviews <wbr>of <wbr>the <wbr>main <wbr>view.</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span> <span class="span4br"></span></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#008200;background-color:inherit;">// <wbr>e.g. <wbr>self.myOutlet <wbr>= <wbr>nil;</wbr></wbr></wbr></wbr></span> <span class="span4br"></span></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">} <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">- <wbr>(<span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;color:#006699;background-color:inherit;font-weight:bold;">void</span>)dealloc <wbr>{ <span class="span4br"></span></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <wbr> <wbr> <wbr> <wbr>[super <wbr>dealloc]; <span class="span4br"></span></wbr></wbr></wbr></wbr></wbr></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">} <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;"> <span class="span4br"></span></span></span></p>
</li>
<li><p><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;border:none;color:black;background-color:inherit;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;border:none;background-color:inherit;font-family:&#39;comic sans ms&#39;;">@end <wbr></p>
<p></wbr></span></span><pre style="color:#494949;font-size:14px;line-height:21px;background-color:#f6f6f6;"><span class="span4br"></span> <span class="span4br"></span></pre><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">为了区分背景UIView，我将UIView的背景色设置为白色，backLayer的背景色设置为橘黄色。
上图是一个矩形区域，如果设置矩形的四个角是椭圆角，可以添加属性：
backLayer.cornerRadius = 20.0; //矩形椭圆角的弧度半径
</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></div><div style="font-size:14px;background-color:#f6f6f6;padding:0px;margin:0px;color:#555555;font-family:宋体, &#39;arial narrow&#39;, arial, serif;line-height:28px;text-align:-webkit-auto;"><span style="word-wrap:normal;word-break:normal;line-height:21px;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">添加带阴影的子Layer（层）,代码：
//添加子layer
CALayer *cyanLayer = [CALayer layer];
cyanLayer.backgroundColor = [UIColor cyanColor].CGColor;
cyanLayer.bounds = CGRectMake(0, 0, 300, 300);
cyanLayer.position = CGPointMake(180, 180);
cyanLayer.shadowOffset = CGSizeMake(0, 3); //设置阴影的偏移量
cyanLayer.shadowRadius = 10.0; //设置阴影的半径
cyanLayer.shadowColor = [UIColor blackColor].CGColor; //设置阴影的颜色为黑色
cyanLayer.shadowOpacity = 0.9; //设置阴影的不透明度</span></span></p>
</li>
</ol>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">[backLayer addSublayer:cyanLayer];
</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">给子Layer添加图片</p>
<p>//添加子image layer
UIImage <em>image = [UIImage imageNamed:@&quot;feiche.jpg&quot;];
CALayer </em>imageLayer = [CALayer layer];
imageLayer.frame = CGRectMake(100, 100, image.size.width, image.size.height);
imageLayer.contents = (id) image.CGImage;
imageLayer.shadowOffset = CGSizeMake(0, 3); //设置阴影的偏移量
imageLayer.shadowRadius = 10.0; //设置阴影的半径
imageLayer.shadowColor = [UIColor blackColor].CGColor; //设置阴影的颜色为黑色
imageLayer.shadowOpacity = 0.9; //设置阴影的不透明度</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">[backLayer addSublayer:imageLayer];
</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">图片加边框，代码：
imageLayer.borderColor = [UIColor grayColor].CGColor; //边框颜色
imageLayer.borderWidth = 2.0; //边框宽度</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
设置图片为椭圆角，代码：
imageLayer.cornerRadius = 10.0; //设置layer圆角半径
imageLayer.masksToBounds = YES; //隐藏边界
</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">
</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">但是由于设置masksToBounds 属性为true所以Layer的阴影效果也就没有了。
之前我都是将图片另外在做有阴影效果的图片，这样显的比较真实，如果阴影部分只是填充边框即可，可以采用两个Layer来实现阴影效果，代码：
UIImage <em>image = [UIImage imageNamed:@&quot;feiche.jpg&quot;];
//阴影layer
CALayer </em>shadowLayer = [CALayer layer];
shadowLayer.frame = CGRectMake(100, 100, image.size.width, image.size.height);
shadowLayer.backgroundColor = [UIColor blueColor].CGColor;
shadowLayer.shadowOffset = CGSizeMake(0, 3);
shadowLayer.cornerRadius = 10.0;
shadowLayer.shadowRadius = 10.0;
shadowLayer.shadowColor = [UIColor blackColor].CGColor; //设置阴影的颜色为黑色
shadowLayer.shadowOpacity = 1.0; //设置阴影的不透明度
[backLayer addSublayer:shadowLayer];</span></span></p>
<p><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;"><span style="word-wrap:normal;word-break:normal;padding:0px;margin:0px;font-family:&#39;comic sans ms&#39;;">//添加子image layer
CALayer *imageLayer = [CALayer layer];
imageLayer.frame = CGRectMake(100, 100, image.size.width, image.size.height);
imageLayer.contents = (id) image.CGImage;
imageLayer.cornerRadius = 10.0; //设置layer圆角半径
imageLayer.masksToBounds = YES; //隐藏边界
imageLayer.borderColor = [UIColor grayColor].CGColor; //边框颜色
imageLayer.borderWidth = 2.0;
[backLayer addSublayer:imageLayer];</span></span>
</div></p>
<p><span class="span4br"></span></p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="null"><strong>null</strong></a> - Mar 25 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://yoursite.com"><strong>Toothpick</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
  
</nav>
</div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="/about/">About</a></div>
    
      <div class="tabbaritem"><a class="next" href="/atom.xml">Subscribe</a></div>
    
</div>


  </div>
</body>
</html>